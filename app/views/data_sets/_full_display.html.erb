<% revision ||= nil %>
<% primary = revision || data_set %>
<% if revision.nil? %>
	<b>Name: </b><%= "#{data_set.name} #{data_set.parameters.nil? ? '' : "<b>Parameters:</b> #{data_set.parameters}" }" %><br />
	<b>Created At:</b> <%= data_set.created_at %><br />
<% else %>
	<% revision_title = "#{revision.created_at} - #{revision.created_at < data_set.created_at ? 'Earlier' : 'Later'}" %> 
	<h3>Revision: <%= revision_title %></h3> 
<% end %>

<% data_table_id = "data_set_#{primary.id}" %>
<% @gon.data_table_ids ||= Array.new %>
<% @gon.data_table_ids << data_table_id %>
<div>
	<%= link_to 'Show Revision', data_set_url( primary ) unless revision.nil? %>
	<table id="<%= data_table_id %>" class="display" >
		<thead>
			<tr>
				<% primary.fields.each do |field| %>
					<th><%= field.name %></th>
				<% end %>
			</tr>
		</thead>
		<tbody>
			<% primary.records.each do |record| %>
				<tr>
					<% primary.fields.each do |field| %>
						<td><%= record.get_cell( field ).string %></td>
					<% end %>
				</tr>
			<% end %>
		</tbody>
	</table>

</div>
